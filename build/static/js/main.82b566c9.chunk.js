(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,a){},26:function(e,t,a){e.exports=a(41)},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),s=a.n(c),o=(a(31),a(7)),i=a(8),l=a(10),m=a(9),u=a(11),h=(a(32),a(23)),p=a(6),d=a(13),g=(a(33),a(19),a(22)),f=a.n(g),b="https://platform.x5gon.org/api/v1/",E=[];fetch("recommendation_words.json").then(function(e){return e.json().then(function(e){E=e.words})});var _=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(m.a)(t).call(this))).searchComponent=function(){e.setState({previous_search:String(e.state.search_key),previous_page:parseInt(e.state.current_page)}),!e.state.search_key||e.state.search_key===e.state.previous_search&&e.state.previous_page===e.state.current_page||(e.setState({isLoaded:!1}),fetch((e.state.corsEnabled?"https://cors-anywhere.herokuapp.com/":"")+b+"search?text="+e.state.search_key+"&page="+e.state.current_page).then(function(e){return e.json()}).then(function(t){e.setState({isLoaded:!0,api_search:{query:t.query,rec_materials:t.rec_materials,metadata:t.metadata},showRecommendations:!1,IsSearching:!0})}),console.log(e.state),console.log("searched with CORS "+(e.state.corsEnabled?"enabled":"disabled")))},e.ChangeSearchKey=function(t){e.setState({search_key:t,showRecommendations:!0})},e.CheckEnter=function(t){"Enter"===t.key&&e.searchComponent()},e.AcceptRec=function(t){e.setState({search_key:t,showRecommendations:!1})},e.ChangePage=function(t){e.setState({current_page:t.selected+1}),e.searchComponent()},e.BottomPagination=function(){return e.state.api_search.metadata.max_pages?r.a.createElement(f.a,{pageCount:e.state.api_search.metadata.max_pages,pageRangeDisplayed:5,marginPagesDisplayed:1,onPageChange:e.ChangePage,containerClassName:"pagination justify-content-center",pageClassName:"page-item",pageLinkClassName:"page-link",activeClassName:"page-item active",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",disabledClassName:"page-item disabled"}):null},e.Recommendations=function(){return""!==e.state.search_key&&e.state.showRecommendations?r.a.createElement("ul",{className:"recommendations"},E.filter(function(t){return t.startsWith(e.state.search_key)}).map(function(t){return r.a.createElement("li",{key:t},r.a.createElement("button",{className:"btn bg-transparent",onClick:e.AcceptRec.bind(Object(d.a)(e),t)},t))}).slice(0,6)):null},e.NrOfSearches=function(){return!0===e.state.IsSearching?r.a.createElement("p",{className:"mt-2"},"Number of search results found:"," ",e.state.api_search.metadata.num_or_materials," for"," ",r.a.createElement("b",null,e.state.api_search.query.text)," in"," ",e.state.api_search.metadata.max_pages," pages | currently on page"," ",e.state.current_page):null},e.SearchBar=function(){return r.a.createElement("input",{ref:function(e){return e&&e.focus()},type:"text",value:e.state.search_key,id:"todoName"+e.props.id,onChange:function(t){return e.ChangeSearchKey(t.target.value)},onKeyDown:e.CheckEnter,placeholder:"Search for OER material",className:"form-control align-middle mb-3",autoComplete:"off"})},e.SearchButton=function(t){return r.a.createElement("button",{type:"button",className:"btn btn-outline-primary px-4",onClick:e.searchComponent.bind(Object(d.a)(e))},t.text)},e.DisableCORSSearch=function(){return e.state.corsEnabled&&!e.state.IsSearching?r.a.createElement("button",{type:"button",className:"btn",onClick:function(){e.setState({corsEnabled:!1})}},"click if you have disabled CORS (much faster)"):null},e.LogoIcon=function(){return r.a.createElement("img",{src:"https://www.x5gon.org/wp-content/themes/x5gon/dist/assets/img/logo.svg",alt:"X5GON",className:"my-5 img-fluid"})},e.SearchItem=function(e){var t=e;return t.description&&t.description.length>280&&(t.description=t.description.substr(0,280)+" ..."),r.a.createElement("li",{key:t.url},r.a.createElement("div",{className:"jumbotron bg-transparent py-1 my-1"},r.a.createElement("a",{href:t.url,target:"blank"},r.a.createElement("h4",{className:"searched"},t.title)),r.a.createElement("span",{className:"text-muted"},r.a.createElement("small",null,t.url)),r.a.createElement("p",null,t.description)))},e.SearchItemsUL=function(t){return r.a.createElement("ul",{className:"searched-items"},e.state.api_search.rec_materials.map(function(t){return e.SearchItem(t)}))},e.SpaceDIV=function(){return!1===e.state.IsSearching?r.a.createElement("div",{id:"spacing-div"}):null},e.LoadingIcon=function(){return!1===e.state.isLoaded?r.a.createElement("div",null,r.a.createElement("img",{src:"Ripple-1.4s-200px.gif",alt:"loading-animation",height:"50px",className:"loading-icon"})):null},e.state={search_key:"",current_page:1,previous_page:0,previous_search:"",api_search:{query:{},rec_materials:[],metadata:{max_pages:0}},isLoaded:!0,showRecommendations:!1,IsSearching:!1,corsEnabled:!0},e}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(this.SpaceDIV,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"text-center",id:"search"},r.a.createElement(this.LogoIcon,null),r.a.createElement(this.SearchBar,null),r.a.createElement(this.SearchButton,{text:"Search"}),r.a.createElement("div",null),r.a.createElement(this.DisableCORSSearch,null),r.a.createElement(this.LoadingIcon,null)),r.a.createElement(this.Recommendations,null),r.a.createElement(this.NrOfSearches,null),r.a.createElement(this.SearchItemsUL,null),r.a.createElement(this.BottomPagination,null)))}}]),t}(r.a.Component),y=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(m.a)(t).call(this))).state={},e}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"home")}}]),t}(r.a.Component),v=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement(p.a,{path:"/",exact:!0,component:y}),r.a.createElement(p.a,{path:"/search",exact:!0,component:_}))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[26,1,2]]]);
//# sourceMappingURL=main.82b566c9.chunk.js.map